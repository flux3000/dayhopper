<!DOCTYPE html>
<html>
<head>
    <title>IO Lab - Memex</title>
    
    <!-- link to css file -->
    <link rel="stylesheet" type="text/css" href="_css/style.css" />
    <link href='http://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
    <!-- link to javascript files -->
    <script src="_js/jquery-1.10.2.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script>
        $(document).ready(function() {
            $.getJSON("http://feeds.delicious.com/v2/json/dantsai?callback=?",
            function(data){
                $.each(data, function(i, item){
                    var title = item.d;
                    var url = item.u;
                    var date = item.dt;
                    var tags = item.t;

                    if ($.inArray("Dummy", tags) > -1) {
                        $.each(tags, function(index, value) {
                            if (value != "Dummy"){
                                $("#hop-trails").append('<li>'+value+'</li>');
                            }
                        });
                    } else {
                        $("#delicious-bookmarks").append('<li><a href="'+url+'">'+title+'</a> <time>'+niceTime(date)+'</time><br/>'+tags+'</li>');
                    }
                });
                $(".ajax-loader").css("display","none");
            });
        });

        var niceTime = (function(){
            var ints = {
            second: 1,
            minute: 60,
            hour: 3600,
            day: 86400,
            week: 604800,
            month: 2592000,
            year: 31536000
            };
            return function(time){
            time = +new Date(time);
            var gap = ((+new Date()) - time) / 1000,
            amount, measure;
            for (var i in ints){
            if (gap > ints[i]){ measure = i; }
            }
            amount = gap / ints[measure];
            amount = gap > ints.day ? (Math.round(amount)) : Math.round(amount);
            amount += ' ' + measure + (amount > 1 ? 's' : '') + ' ago';
            return amount;
            };
        })();

    </script>



</head>
<body>
    
    <div id="container">

        <div id="title">
            This is a Memex.
        </div>

        <div id="content">
            Here are our bookmarks for SF Hops
        </div>

        <h3>Hop Trails</h3>
        <ul id="hop-trails"></ul>

        <h3>Sites to choose from</h3>
        <ul id="delicious-bookmarks"></ul>
        <div class="ajax-loader">fetching bookmarks...</div>

    </div>

</body>
</html>